version: "3.8"

services:
  m4b-toolbox:
    build: .
    container_name: m4b-toolbox
    ports:
      - "8080:8080"  # host:container
    volumes:
      # Audiobooks library, same path as your script expects
      - /mnt/remotes/192.168.4.4_media/Audiobooks:/mnt/remotes/192.168.4.4_media/Audiobooks:rw

      # Docker socket so the script's `docker run` uses host Docker engine
      - /var/run/docker.sock:/var/run/docker.sock:ro

    environment:
      # Default values (can still be changed in the web UI form)
      MODE: "convert"
      DRY_RUN: "true"

    restart: unless-stopped
