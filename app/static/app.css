/* =========================
   m4brew â€” BASE STYLES (LEAN)
========================= */
*{ box-sizing: border-box; }
html{ background: var(--bg); min-height: 100%; }

body{
  margin: 0;
  min-height: 100%;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans";
  font-size: var(--font);
  line-height: var(--lh);
  color: var(--font1);
  background: transparent;
  position: relative;
}

button, input, select, textarea{
  font: inherit;
  font-size: inherit;
  line-height: inherit;
  color: inherit;
}

/* Top glow overlay (aligned to your new purple) */
body::before{
  content:"";
  position: fixed;
  inset: 0 0 auto 0;
  height: 520px;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(900px 520px at 12% 0%, rgb(var(--task-convert-rgb) / .22), rgb(var(--task-convert-rgb) / 0) 60%),
    radial-gradient(900px 520px at 50% 0%, rgb(var(--task-rename-rgb) / .22), rgb(var(--task-rename-rgb) / 0) 60%),
    radial-gradient(900px 520px at 88% 0%, rgb(var(--task-delete-rgb) / .20), rgb(var(--task-delete-rgb) / 0) 60%),
    linear-gradient(180deg, var(--gradient-overlay), rgba(0,0,0,0));
}

a{ color: inherit; text-decoration: none; }

.wrap{
  max-width: 980px;
  margin: 0 auto;
  padding: 26px 18px 44px;
  position: relative;
  z-index: 1;
}

/* Header */
.header{
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: 14px;
  padding: 18px 16px 10px;
}

.brand{
  display:flex;
  flex-direction: column;
  align-items:center;
  gap: 10px;
}

.logo{
  width: 92px;
  height: 92px;
  background: transparent;
  border: none;
  box-shadow: none;
  display:flex;
  align-items:center;
  justify-content:center;
}
.logo img{
  width: 92px;
  height: 92px;
  object-fit: contain;
  display:block;
  background: transparent;
}

/* Only exception: big app title */
h1.title{
  margin: 0;
  line-height: 1.1;
  font-size: 30pt;
  letter-spacing: .2px;
}

.subtitle{
  margin: 0;
  color: var(--font2);
}

/* âœ… Single source of truth: version is dark grey */
.version{
  margin: 10px 0 0;
  color: var(--version-color);
  opacity: 1;
  font-weight: 600;
  color: var(--font2);
}

/* Nav pills */
.nav{
  display:flex;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 6px;
}

.pill{
  display:inline-flex;
  align-items:center;
  gap: 8px;
  height: var(--pill-h);
  padding: 0 16px;
  border-radius: var(--radius-pill);
  background: var(--buttons2);
  border: 1px solid var(--border);
  transition: transform .06s ease, background .12s ease, border-color .12s ease;
  user-select: none;
}
.pill:hover{ transform: translateY(-1px); background: var(--buttons2); }
.pill.active{
  background: var(--buttons1);
  border-color: var(--taskcolour3);
}

/* âœ… Header pills same width (desktop/tablet). Mobile stays flexible. */
.nav .pill{
  width: 170px;
  justify-content: center;
}
@media (max-width: 520px){
  .nav .pill{
    width: auto;
    justify-content: flex-start;
  }
}

.dot{
  width: 9px;
  height: 9px;
  border-radius: 999px;
  background: var(--font3);
}
.pill.active .dot{ background: var(--taskcolour3); }

/* Content */
.content{ margin-top: 18px; padding: 0 2px; }

.card{
  background: transparent; /* ðŸ‘ˆ remove fill */
  border: 1px solid var(--border); /* keep outline */
  border-radius: var(--radius);
  box-shadow: var(--shadow); /* optional, keep for lift */
  padding: 16px;
}

/* Content stack helper (History-style rows) */
.content-stack{
  display: grid;
  gap: 0;
  padding: 0;
}
.content-stack > *{ padding: var(--stack-pad) 0; }
.content-stack > * + *{ border-top: 1px solid var(--stack-line); }

/* Inputs */
input[type="text"], input[type="number"], select{
  color: var(--font1);
  width:100%;
  height: var(--pill-h);
  padding: 0 14px;
  border-radius: var(--radius-pill);
  border: 1px solid var(--outlines);
  background: var(--empty);
  outline: none;
}
input::placeholder{ color: var(--font3); }

/* Buttons */
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap: 8px;
  height: var(--pill-h);
  padding: 0 16px;
  border-radius: var(--radius-pill);
  border: 1px solid var(--taskcolour3);
  background: var(--buttons1);
  color: var(--font1);
  cursor: pointer;
  transition: transform .06s ease, background .12s ease, border-color .12s ease;
}
.btn:hover{ transform: translateY(-1px); background: var(--button-hover); }

/* âœ… Primary purple everywhere (header active-ish buttons, live ON, etc.) */
.btn.primary{
  background: var(--buttons1);
  border-color: var(--taskcolour3);
  font-weight: 650;
}

.btn.danger{ background: var(--buttons1); border-color: var(--taskcolour3); }
.btn:disabled{ opacity: .55; cursor: not-allowed; transform:none; }

/* Label pill */
.label-pill{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height: var(--pill-h);
  padding: 0 16px;
  border-radius: var(--radius-pill);
  background: var(--accent-soft);
  border: 1px solid var(--accent-border);
  color: var(--font1);
  font-weight: 500;
  letter-spacing: .2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  box-shadow: 0 10px 22px var(--shadow);
}

.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }

pre{
  white-space: pre-wrap;
  overflow-wrap: anywhere;
  word-break: break-word;
  background: var(--buttons2);
  border: 1px solid var(--outlines);
  border-radius: 14px;
  padding: 12px;
  max-height: 45vh;
  overflow:auto;
  color: var(--font1);
}

/* Page card alignment */
.card--about{ padding: 0; }
.card--settings{ padding: 0; }

/* Narrow content cards (About / Tasks / Settings only) */
.card--about,
.card--tasks,
.card--settings{
  width: 100%;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
}


/* Donate line â€“ intro grey, link white (About + Tasks) */
.donate-line{
  margin-top: -10px;
  text-align: center;
}
.donate-line .muted{
  color: var(--font2) !important;
  color: var(--font2);
}
.donate-line a{
  color: var(--font1) !important;
  color: var(--font2);
  text-decoration: none;
}
.donate-line a:hover{
  text-decoration: underline;
}

/* =========================
   M4Brew: Status pill animation
   - running: subtle pulse
   - done: quick confirmation flash
========================= */

@keyframes m4brewStatusPulse{
  0%   { transform: translateY(0);   box-shadow: 0 0 0 rgba(0,0,0,0); }
  50%  { transform: translateY(-1px); box-shadow: 0 0 0 6px var(--pulse-shadow); }
  100% { transform: translateY(0);   box-shadow: 0 0 0 rgba(0,0,0,0); }
}

@keyframes m4brewStatusDone{
  0%   { box-shadow: 0 0 0 0 rgba(60,220,130,0.0); }
  35%  { box-shadow: 0 0 0 8px rgba(60,220,130,0.18); }
  100% { box-shadow: 0 0 0 0 rgba(60,220,130,0.0); }
}

/* Apply states by toggling these classes on #statusPill */
.status-pill.status-running{
  border-color: var(--empty);
  background-color: var(--running-bg, var(--buttons1));
  font-weight: 750;
  animation: m4brewStatusPulse 1.2s ease-in-out infinite;
  will-change: transform, box-shadow;
/* Task-specific colors override when running */
}
/* Task-specific colors override when running */
.status-pill.status-running.status-run1 {
  background-color: var(--task-convert) !important;
}
.status-pill.status-running.status-run2 {
  background-color: var(--task-rename) !important;
}
.status-pill.status-running.status-run3 {
  background-color: var(--task-delete) !important;
}

.status-pill.status-done{
/* UNUSED:   background: rgba(60,220,130,.12);
/* UNUSED:   border-color: var(--test-outline, rgba(99,102,241,.38));
*/
  font-weight: 750;
  animation: m4brewStatusDone 900ms ease-out 1;
}


/* =========================
   M4Brew: Status pill (1.3.0 groundwork)
   - full width
   - double-height (2-line)
   - warn / error states
========================= */

.status-wrap .status-pill{
  width: 100%;
  text-align: left;
}

.status-pill .pill-line1{
  display: block;
  line-height: 1.15;
  font-weight: 800;
}

.status-pill .pill-line2{
  display: block;
  margin-top: 6px;
  line-height: 1.15;
  opacity: .92;
}

/* keep pill height consistent even when line2 is empty */
.status-pill.is-two-line{
  padding-top: 22px;
  padding-bottom: 22px;
  min-height: 88px;
}

/* Warn = orange (nothing to do, cancelled, partial failure) */
.status-pill.status-warn{
  background: var(--warning);
    border-color: var(--warning);
  font-weight: 850;
}

/* Error = red (write denied, folder not mounted, hard failures) */
.status-pill.status-error{
  background: var(--failed);
    border-color: var(--taskcolour3);
  font-weight: 850;
}

/* M4Brew: Force 2-line status pill to STACK (not side-by-side) */
.status-pill.is-two-line{
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
}

.status-pill.is-two-line .pill-line1,
.status-pill.is-two-line .pill-line2{
  width: 100%;
  text-align: center;
}

/* --- M4Brew: status pill pulse uses task colour --- */
.status-pill.status-running{
  position: relative;
  overflow: visible;
}
/* Task-specific colors override when running */
.status-pill.status-running.status-run1 {
  background-color: var(--task-convert) !important;
}
.status-pill.status-running.status-run2 {
  background-color: var(--task-rename) !important;
}
.status-pill.status-running.status-run3 {
  background-color: var(--task-delete) !important;
}

/* Animated outline sits on top of the pill border */
.status-pill.status-running::after{
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: 999px;
  border: 2px solid var(--pulse-border, var(--accent-border));
  opacity: .35;
  pointer-events: none;
  animation: m4brewPulseOutline 1.2s ease-in-out infinite;
}

@keyframes m4brewPulseOutline{
  0%,100%{ transform: scale(0.992); opacity: .25; }
  50%    { transform: scale(1.02);  opacity: .80; }
}

/* --- M4Brew: brew bar smooth colour transitions (red -> orange fade) --- */
.status-pill{
  transition: background-color 1s ease, border-color 1s ease, color 1s ease, box-shadow 1s ease;
}

/* --- M4Brew: brew bar state colors --- */

/* Grey idle: "Ready to Brew" */
.status-pill.status-idle{
  background-color: var(--buttons2);
  border-color: var(--outlines);
  color: var(--font1);
}

/* Purple test: all successful "Test Complete ..." states */
  border-color: var(--taskcolour3);
  border-width: 2px !important;
  border-style: solid !important;
  color: var(--font1);
}

    b
.status-pill.status-run1{
  background-color: var(--task-convert) !important;
  border-color: var(--outlines);
  color: var(--font1);
  font-weight: 850;
}



/* --- M4Brew: Rename RUN complete pill (matches Step 2 Run button) --- */
.status-pill.status-run2{
  background-color: var(--task-rename);
  border-color: var(--outlines);
  color: var(--font1);
  font-weight: 850;
}

/* --- M4Brew: Delete RUN complete pill (matches Step 3 Run button) --- */
.status-pill.status-run3{
  background-color: var(--task-delete);
  border-color: var(--outlines);
  color: var(--font1);
  font-weight: 850;
}

/* --- M4Brew: Pulse v2 (no outline ring, pulse uses --pulse-color) --- */

/* Disable the animated outline ring entirely */
.status-pill.status-running::after{ content: none !important; display:none !important; }

/* Pulse uses the per-mode colour injected by JS */
@keyframes m4brewStatusPulse2{
  0%   { transform: translateY(0);    box-shadow: 0 0 0 0 var(--pulse-color, var(--pulse-shadow)); }
  50%  { transform: translateY(-1px); box-shadow: 0 0 0 8px var(--pulse-color, var(--pulse-shadow)); }
  100% { transform: translateY(0);    box-shadow: 0 0 0 0 var(--pulse-color, var(--pulse-shadow)); }
}

.status-pill.status-running{
  animation: m4brewStatusPulse2 1.2s ease-in-out infinite !important;
}
/* Task-specific colors override when running */
.status-pill.status-running.status-run1 {
  background-color: var(--task-convert) !important;
}
.status-pill.status-running.status-run2 {
  background-color: var(--task-rename) !important;
}
.status-pill.status-running.status-run3 {
  background-color: var(--task-delete) !important;
}

/* --- M4Brew: Test pill outline (purple fill, outline matches run1/run2/run3) --- */

/* --- FINAL OVERRIDE: make TEST status clearly purple --- */
.status-pill.status-test{
  background-color: var(--buttons1) !important;  /* stronger purple fill */
  border-color: var(--taskcolour3) !important;
  border-width: 1px !important;
  border-style: solid !important;
  color: var(--font1) !important;
}

/* --- M4Brew: Status pill one-line mode (keep line2 capability, but never grow taller) --- */
.status-pill.is-two-line{
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  min-height: var(--pill-h) !important;
}
.status-pill .pill-line2{
  display: none !important;
}

/* UI version label comes from theme.css */
.version::before{ content: var(--ui-version); }

/* Force Step 2 TEST status pill outline to Run-2 (Rename) colour */

/* Remove pulsing outline ring for REAL RUN modes (keep it for TEST if desired) */
.status-pill.status-running.status-run1::after,
.status-pill.status-running.status-run2::after,
.status-pill.status-running.status-run3::after{
  content: none !important;
  display: none !important;
}

/* --- running status pill: no outline (keep pulse only) --- */
.status-pill.status-running{
  border-color: transparent !important;
}
/* Task-specific colors override when running */
.status-pill.status-running.status-run1 {
  background-color: var(--task-convert) !important;
}
.status-pill.status-running.status-run2 {
  background-color: var(--task-rename) !important;
}
.status-pill.status-running.status-run3 {
  background-color: var(--task-delete) !important;
}
.status-pill.status-running.status-pill--outlined{
  box-shadow: none !important;
}
