/* =========================
   m4brew â€” BASE STYLES (LEAN)
========================= */

:root{
  --bg: #111318;
  --text: #e9edf3;
  --muted: rgba(233,237,243,.68);
  --border: rgba(233,237,243,.10);

  /* âœ… Primary purple (your chosen colour) */
  --accent: #3a3470;
  --accent-soft: rgba(58,52,112,0.28);
  --accent-border: rgba(120,115,180,0.55);
  --danger: #ff5c7a;

  /* Semantic colours */
  --success: #7dffbf;

  /* Shared surfaces/lines/text (use everywhere) */
  --line: rgba(255,255,255,.14);
  --panel-border: rgba(255,255,255,.12);
  --panel-bg: rgba(255,255,255,.04);
  --panel-bg-2: rgba(255,255,255,.06);
  --text-weak: rgba(233,237,243,.70);
  --text-strong: rgba(233,237,243,.92);
  --text-strong-2: rgba(233,237,243,.95);
  --text-mid: rgba(233,237,243,.90);

  /* Shared UI tones (single source) */
  --panel-bg-03: rgba(255,255,255,.03);
  --panel-bg-05: rgba(255,255,255,.05);
  --overlay-dim: rgba(0,0,0,.55);
  --modal-bg: rgba(20,22,28,.96);
  --shadow-soft: rgba(0,0,0,.12);
  --shadow-strong: rgba(0,0,0,.55);
  --shadow-inset: rgba(33,28,61,.18);
  --line-soft: rgba(255,255,255,.10);
  --white: #fff;
  --white-95: rgba(255,255,255,.95);



  /* Run button colours */
  --run-1: #27A9E6; /* Convert */
  --run-2: #AD5DA3; /* Rename */
  --run-3: #5250A1; /* Delete */
  --run-1-rgb: 39 169 230;  /* Convert */
  --run-2-rgb: 173 93 163;  /* Rename */
  --run-3-rgb: 82 80 161; /* Delete */



  --radius: 18px;
  --radius-pill: 999px;
  --shadow: 0 18px 40px rgba(0,0,0,.38);

  --font: 10pt;
  --lh: 1.35;
  --pill-h: 44px;
  --pill-pad-x: 16px;

  --card-bg-a: rgba(255,255,255,.04);
  --card-bg-b: rgba(255,255,255,.03);

  --stack-pad: 22px;
  --stack-line: rgba(255,255,255,.14);
}

*{ box-sizing: border-box; }
html{ background: var(--bg); min-height: 100%; }

body{
  margin: 0;
  min-height: 100%;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans";
  font-size: var(--font);
  line-height: var(--lh);
  color: var(--text);
  background: transparent;
  position: relative;
}

button, input, select, textarea{
  font: inherit;
  font-size: inherit;
  line-height: inherit;
  color: inherit;
}

/* Top glow overlay (aligned to your new purple) */
body::before{
  content:"";
  position: fixed;
  inset: 0 0 auto 0;
  height: 520px;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(900px 520px at 12% 0%, rgb(var(--run-1-rgb) / .22), rgb(var(--run-1-rgb) / 0) 60%),
    radial-gradient(900px 520px at 50% 0%, rgb(var(--run-2-rgb) / .22), rgb(var(--run-2-rgb) / 0) 60%),
    radial-gradient(900px 520px at 88% 0%, rgb(var(--run-3-rgb) / .20), rgb(var(--run-3-rgb) / 0) 60%),
    linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,0));
}

a{ color: inherit; text-decoration: none; }

.wrap{
  max-width: 980px;
  margin: 0 auto;
  padding: 26px 18px 44px;
  position: relative;
  z-index: 1;
}

/* Header */
.header{
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: 14px;
  padding: 18px 16px 10px;
}

.brand{
  display:flex;
  flex-direction: column;
  align-items:center;
  gap: 10px;
}

.logo{
  width: 92px;
  height: 92px;
  background: transparent;
  border: none;
  box-shadow: none;
  display:flex;
  align-items:center;
  justify-content:center;
}
.logo img{
  width: 92px;
  height: 92px;
  object-fit: contain;
  display:block;
  background: transparent;
}

/* Only exception: big app title */
h1.title{
  margin: 0;
  line-height: 1.1;
  font-size: 30pt;
  letter-spacing: .2px;
}

.subtitle{
  margin: 0;
  color: var(--muted);
}

/* âœ… Single source of truth: version is dark grey */
.version{
  margin: 10px 0 0;
  color: #2b2438;
  opacity: 0.95;
  font-weight: 600;
}

/* Nav pills */
.nav{
  display:flex;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 6px;
}

.pill{
  display:inline-flex;
  align-items:center;
  gap: 8px;
  height: var(--pill-h);
  padding: 0 var(--pill-pad-x);
  border-radius: var(--radius-pill);
  background: rgba(255,255,255,.05);
  border: 1px solid var(--border);
  transition: transform .06s ease, background .12s ease, border-color .12s ease;
  user-select: none;
}
.pill:hover{ transform: translateY(-1px); background: rgba(255,255,255,.07); }
.pill.active{
  background: var(--accent-soft);
  border-color: var(--test-outline, rgba(99,102,241,.38));
}

/* âœ… Header pills same width (desktop/tablet). Mobile stays flexible. */
.nav .pill{
  width: 170px;
  justify-content: center;
}
@media (max-width: 520px){
  .nav .pill{
    width: auto;
    justify-content: flex-start;
  }
}

.dot{
  width: 9px;
  height: 9px;
  border-radius: 999px;
  background: rgba(233,237,243,.35);
}
.pill.active .dot{ background: var(--accent); }

/* Content */
.content{ margin-top: 18px; padding: 0 2px; }

.card{
  background: transparent; /* ðŸ‘ˆ remove fill */
  border: 1px solid var(--border); /* keep outline */
  border-radius: var(--radius);
  box-shadow: var(--shadow); /* optional, keep for lift */
  padding: 16px;
}

/* Content stack helper (History-style rows) */
.content-stack{
  display: grid;
  gap: 0;
  padding: 0;
}
.content-stack > *{ padding: var(--stack-pad) 0; }
.content-stack > * + *{ border-top: 1px solid var(--stack-line); }

/* Inputs */
input[type="text"], input[type="number"], select{
  width:100%;
  height: var(--pill-h);
  padding: 0 14px;
  border-radius: var(--radius-pill);
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.18);
  outline: none;
}
input::placeholder{ color: rgba(233,237,243,.35); }

/* Buttons */
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap: 8px;
  height: var(--pill-h);
  padding: 0 var(--pill-pad-x);
  border-radius: var(--radius-pill);
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color: #fff;
  cursor: pointer;
  transition: transform .06s ease, background .12s ease, border-color .12s ease;
}
.btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.08); }

/* âœ… Primary purple everywhere (header active-ish buttons, live ON, etc.) */
.btn.primary{
  background: var(--accent-soft);
  border-color: var(--test-outline, rgba(99,102,241,.38));
  font-weight: 650;
}

.btn.danger{ background: rgba(255,92,122,.14); border-color: var(--test-outline, rgba(99,102,241,.38)); }
.btn:disabled{ opacity: .55; cursor: not-allowed; transform:none; }

/* Label pill */
.label-pill{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height: var(--pill-h);
  padding: 0 var(--pill-pad-x);
  border-radius: var(--radius-pill);
  background: var(--accent-soft);
  border: 1px solid var(--accent-border);
  color: rgba(233,237,243,.92);
  font-weight: 750;
  letter-spacing: .2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  box-shadow: 0 10px 22px rgba(0,0,0,.12);
}

.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }

pre{
  white-space: pre-wrap;
  overflow-wrap: anywhere;
  word-break: break-word;
  background: rgba(0,0,0,.20);
  border: 1px solid rgba(255,255,255,.10);
  border-radius: 14px;
  padding: 12px;
  max-height: 45vh;
  overflow:auto;
  color: rgba(233,237,243,.92);
}

/* Page card alignment */
.card--about{ padding: 0; }
.card--settings{ padding: 0; }

/* Narrow content cards (About / Tasks / Settings only) */
.card--about,
.card--tasks,
.card--settings{
  width: 100%;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
}


/* Donate line â€“ intro grey, link white (About + Tasks) */
.donate-line{
  text-align: center;
}
.donate-line .muted{
  color: rgba(233,237,243,.55);
}
.donate-line a{
  color: var(--text);
  text-decoration: none;
}
.donate-line a:hover{
  text-decoration: underline;
}

/* =========================
   M4Brew: Status pill animation
   - running: subtle pulse
   - done: quick confirmation flash
========================= */

@keyframes m4brewStatusPulse{
  0%   { transform: translateY(0);   box-shadow: 0 0 0 rgba(0,0,0,0); }
  50%  { transform: translateY(-1px); box-shadow: 0 0 0 6px rgba(58,52,112,0.14); }
  100% { transform: translateY(0);   box-shadow: 0 0 0 rgba(0,0,0,0); }
}

@keyframes m4brewStatusDone{
  0%   { box-shadow: 0 0 0 0 rgba(60,220,130,0.0); }
  35%  { box-shadow: 0 0 0 8px rgba(60,220,130,0.18); }
  100% { box-shadow: 0 0 0 0 rgba(60,220,130,0.0); }
}

/* Apply states by toggling these classes on #statusPill */
.status-pill.status-running{
  background-color: var(--running-bg, var(--accent-soft));
  border-color: var(--running-border, var(--accent-border));
  font-weight: 750;
  animation: m4brewStatusPulse 1.2s ease-in-out infinite;
  will-change: transform, box-shadow;
}

.status-pill.status-done{
  background: rgba(60,220,130,.12);
  border-color: var(--test-outline, rgba(99,102,241,.38));
  font-weight: 750;
  animation: m4brewStatusDone 900ms ease-out 1;
}


/* =========================
   M4Brew: Status pill (1.3.0 groundwork)
   - full width
   - double-height (2-line)
   - warn / error states
========================= */

.status-wrap .status-pill{
  width: 100%;
  text-align: left;
}

.status-pill .pill-line1{
  display: block;
  line-height: 1.15;
  font-weight: 800;
}

.status-pill .pill-line2{
  display: block;
  margin-top: 6px;
  line-height: 1.15;
  opacity: .92;
}

/* keep pill height consistent even when line2 is empty */
.status-pill.is-two-line{
  padding-top: 22px;
  padding-bottom: 22px;
  min-height: 88px;
}

/* Warn = orange (nothing to do, cancelled, partial failure) */
.status-pill.status-warn{
  background: rgba(245,158,11,.14);
  border-color: var(--test-outline, rgba(99,102,241,.38));
  font-weight: 850;
}

/* Error = red (write denied, folder not mounted, hard failures) */
.status-pill.status-error{
  background: rgba(239,68,68,.14);
  border-color: var(--test-outline, rgba(99,102,241,.38));
  font-weight: 850;
}

/* M4Brew: Force 2-line status pill to STACK (not side-by-side) */
.status-pill.is-two-line{
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
}

.status-pill.is-two-line .pill-line1,
.status-pill.is-two-line .pill-line2{
  width: 100%;
  text-align: center;
}

/* --- M4Brew: status pill pulse uses task colour --- */
.status-pill.status-running{
  position: relative;
  overflow: visible;
}

/* Animated outline sits on top of the pill border */
.status-pill.status-running::after{
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: 999px;
  border: 2px solid var(--pulse-border, var(--accent-border));
  opacity: .35;
  pointer-events: none;
  animation: m4brewPulseOutline 1.2s ease-in-out infinite;
}

@keyframes m4brewPulseOutline{
  0%,100%{ transform: scale(0.992); opacity: .25; }
  50%    { transform: scale(1.02);  opacity: .80; }
}

/* --- M4Brew: brew bar smooth colour transitions (red -> orange fade) --- */
.status-pill{
  transition: background-color 1s ease, border-color 1s ease, color 1s ease, box-shadow 1s ease;
}

/* --- M4Brew: brew bar state colors --- */

/* Grey idle: "Ready to Brew" */
.status-pill.status-idle{
  background-color: rgba(255,255,255,.06);
  border-color: var(--test-outline, rgba(99,102,241,.38));
  color: rgba(255,255,255,.92);
}

/* Purple test: all successful "Test Complete ..." states */
  border-color: var(--test-outline, rgba(99,102,241,.38));
  border-width: 2px !important;
  border-style: solid !important;
  color: rgba(255,255,255,.95);
}

    b
.status-pill.status-run1{
  background-color: var(--run-1, #27A9E6);
  border-color: rgba(255,255,255,.14);
  color: rgba(255,255,255,.95);
  font-weight: 850;
}



/* --- M4Brew: Rename RUN complete pill (matches Step 2 Run button) --- */
.status-pill.status-run2{
  background-color: var(--run-2, #AD5DA3);
  border-color: rgba(255,255,255,.14);
  color: rgba(255,255,255,.95);
  font-weight: 850;
}

/* --- M4Brew: Delete RUN complete pill (matches Step 3 Run button) --- */
.status-pill.status-run3{
  background-color: var(--run-3, #5250A1);
  border-color: rgba(255,255,255,.14);
  color: rgba(255,255,255,.95);
  font-weight: 850;
}

/* --- M4Brew: Pulse v2 (no outline ring, pulse uses --pulse-color) --- */

/* Disable the animated outline ring entirely */
.status-pill.status-running::after{ content: none !important; display:none !important; }

/* Pulse uses the per-mode colour injected by JS */
@keyframes m4brewStatusPulse2{
  0%   { transform: translateY(0);    box-shadow: 0 0 0 0 var(--pulse-color, rgba(58,52,112,.14)); }
  50%  { transform: translateY(-1px); box-shadow: 0 0 0 8px var(--pulse-color, rgba(58,52,112,.14)); }
  100% { transform: translateY(0);    box-shadow: 0 0 0 0 var(--pulse-color, rgba(58,52,112,.14)); }
}

.status-pill.status-running{
  animation: m4brewStatusPulse2 1.2s ease-in-out infinite !important;
}

/* --- M4Brew: Test pill outline (purple fill, outline matches run1/run2/run3) --- */

/* --- FINAL OVERRIDE: make TEST status clearly purple --- */
.status-pill.status-test{
  background-color: rgba(99,102,241,.30) !important;  /* stronger purple fill */
  border-color: var(--test-outline, rgba(99,102,241,.55)) !important;
  border-width: 2px !important;
  border-style: solid !important;
  color: rgba(255,255,255,.95) !important;
}

/* --- M4Brew: Status pill one-line mode (keep line2 capability, but never grow taller) --- */
.status-pill.is-two-line{
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  min-height: var(--pill-h) !important;
}
.status-pill .pill-line2{
  display: none !important;
}

/* UI version label comes from theme.css */
.version::before{ content: var(--ui-version, ""); }
