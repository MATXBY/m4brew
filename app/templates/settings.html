{% extends "base.html" %}
{% set active_page = "settings" %}
{% block title %}m4brew â€” Settings{% endblock %}

{% block content %}
  <div class="card">
    <h2 style="margin:0 0 10px 0;">Settings</h2>
    <p class="muted" style="margin:0 0 16px 0;">These are saved into <span class="mono">/config/settings.json</span>.</p>

    <form method="post" action="/settings">
      <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
        <div style="grid-column: 1 / -1;">
          <label for="root_folder">Root folder</label>
          <input id="root_folder" type="text" name="root_folder"
                 value="{{ settings.get('root_folder','') if settings else '' }}">
        </div>

        <div>
          <label for="audio_mode">Audio mode</label>
          {% set am = (settings.get("audio_mode") if settings else "match") %}
          <select id="audio_mode" name="audio_mode">
            <option value="match" {% if am == "match" %}selected{% endif %}>match (detect mono/stereo)</option>
            <option value="mono" {% if am == "mono" %}selected{% endif %}>mono</option>
            <option value="stereo" {% if am == "stereo" %}selected{% endif %}>stereo</option>
          </select>
        </div>

        <div>
          <label for="bitrate">Bitrate (kbps)</label>
          <input id="bitrate" type="number" name="bitrate" min="32" max="320" step="1"
                 value="{{ settings.get('bitrate', 64) if settings else 64 }}">
        </div>
      </div>

      <div style="margin-top:14px;">
        <button class="btn primary" type="submit">Save</button>
      </div>
    </form>
  </div>
{% endblock %}

